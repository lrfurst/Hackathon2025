{
  "encoder_schema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MVP Flight Delay Predictor - Feature Encoders",
    "description": "Esquema para serialização dos encoders usados no MVP",
    "type": "object",
    "properties": {
      "airline_encoder": {
        "type": "object",
        "description": "Mapeamento companhia aérea → código numérico",
        "additionalProperties": {
          "type": "integer"
        },
        "examples": [
          {
            "AA": 0,
            "DL": 1,
            "UA": 2
          }
        ]
      },
      "route_encoder": {
        "type": "object",
        "description": "Mapeamento rota (ORIG-DEST) → código numérico",
        "additionalProperties": {
          "type": "integer"
        },
        "examples": [
          {
            "JFK-LAX": 0,
            "ATL-DFW": 1,
            "ORD-DEN": 2
          }
        ]
      },
      "distance_stats": {
        "type": "object",
        "properties": {
          "min_distance": {
            "type": "number",
            "minimum": 0
          },
          "max_distance": {
            "type": "number",
            "minimum": 0
          }
        },
        "required": [
          "min_distance",
          "max_distance"
        ]
      },
      "metadata": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "version": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      }
    },
    "required": [
      "airline_encoder",
      "route_encoder",
      "distance_stats",
      "metadata"
    ]
  },
  "feature_specification": {
    "input_schema": {
      "type": "object",
      "properties": {
        "companhia_aerea": {
          "type": "string",
          "pattern": "^[A-Z0-9]{2}$",
          "description": "Código IATA da companhia aérea (2 letras/números)",
          "example": "AA"
        },
        "aeroporto_origem": {
          "type": "string",
          "pattern": "^[A-Z]{3}$",
          "description": "Código IATA do aeroporto de origem (3 letras)",
          "example": "JFK"
        },
        "aeroporto_destino": {
          "type": "string",
          "pattern": "^[A-Z]{3}$",
          "description": "Código IATA do aeroporto de destino (3 letras)",
          "example": "LAX"
        },
        "data_hora_partida": {
          "type": "string",
          "format": "date-time",
          "description": "Data e hora da partida no formato ISO 8601",
          "example": "2024-01-15T14:30:00"
        },
        "distancia_km": {
          "type": "number",
          "minimum": 0,
          "maximum": 5000,
          "description": "Distância em quilômetros entre origem e destino",
          "example": 500.0
        }
      },
      "required": [
        "companhia_aerea",
        "aeroporto_origem",
        "aeroporto_destino",
        "data_hora_partida",
        "distancia_km"
      ],
      "additionalProperties": false
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "encoded_simple_airline": {
          "type": "integer",
          "minimum": -1,
          "description": "Código numérico da companhia aérea (-1 para desconhecido)"
        },
        "encoded_route_pair": {
          "type": "integer",
          "minimum": -1,
          "description": "Código numérico da rota origem-destino (-1 para desconhecido)"
        },
        "hour_of_day": {
          "type": "integer",
          "minimum": 0,
          "maximum": 23,
          "description": "Hora do dia da partida (0-23)"
        },
        "time_of_day_category": {
          "type": "string",
          "enum": [
            "madrugada",
            "manha",
            "tarde",
            "noite",
            "desconhecido"
          ],
          "description": "Categoria do horário do dia"
        },
        "day_of_week": {
          "type": "integer",
          "minimum": 0,
          "maximum": 6,
          "description": "Dia da semana (0=segunda, 6=domingo)"
        },
        "distance_km": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Distância normalizada (0-1)"
        },
        "is_weekend": {
          "type": "integer",
          "minimum": 0,
          "maximum": 1,
          "description": "Indicador de final de semana (1=sim, 0=não)"
        }
      },
      "required": [
        "encoded_simple_airline",
        "encoded_route_pair",
        "hour_of_day",
        "time_of_day_category",
        "day_of_week",
        "distance_km",
        "is_weekend"
      ]
    },
    "ranges_and_validation": {
      "hour_of_day": {
        "min": 0,
        "max": 23,
        "default": 12
      },
      "day_of_week": {
        "min": 0,
        "max": 6,
        "default": 0
      },
      "distance_km": {
        "min": 0,
        "max": 5000,
        "normalized_min": 0.0,
        "normalized_max": 1.0
      },
      "time_of_day_categories": {
        "madrugada": [
          0,
          1,
          2,
          3,
          4,
          5
        ],
        "manha": [
          6,
          7,
          8,
          9,
          10,
          11
        ],
        "tarde": [
          12,
          13,
          14,
          15,
          16,
          17
        ],
        "noite": [
          18,
          19,
          20,
          21,
          22,
          23
        ]
      }
    }
  },
  "example_payloads": {
    "example_request": {
      "companhia_aerea": "AA",
      "aeroporto_origem": "JFK",
      "aeroporto_destino": "LAX",
      "data_hora_partida": "2024-01-15T14:30:00",
      "distancia_km": 3980.0
    },
    "example_response_success": {
      "status": "success",
      "features": {
        "encoded_simple_airline": 0,
        "encoded_route_pair": 42,
        "hour_of_day": 14,
        "time_of_day_category": "tarde",
        "day_of_week": 0,
        "distance_km": 0.796,
        "is_weekend": 0
      },
      "metadata": {
        "processing_time_ms": 0.85,
        "model_version": "1.0.0",
        "timestamp": "2026-01-15T21:57:06.795543"
      }
    },
    "example_response_error": {
      "status": "error",
      "error_code": "VALIDATION_ERROR",
      "message": "Código de companhia aérea inválido",
      "details": {
        "field": "companhia_aerea",
        "value": "XYZ",
        "expected": "Código IATA de 2 caracteres"
      }
    }
  },
  "metadata": {
    "created_at": "2026-01-15T21:57:06.795838",
    "version": "1.0.0",
    "author": "@ananda.matos",
    "description": "Contrato de features para MVP do modelo de previsão de atrasos"
  }
}