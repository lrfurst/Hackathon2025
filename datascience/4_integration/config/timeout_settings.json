# timeout_settings.json
{
  "timeout_configuration": {
    "description": "Configurações de timeout para integração Java-Python",
    "last_updated": "2024-01-15",
    "environment": "development",

    "api_timeouts": {
      "connect_timeout_seconds": 1.0,
      "read_timeout_seconds": 2.0,
      "total_timeout_seconds": 2.5,
      "health_check_timeout_seconds": 1.0
    },

    "java_client_timeouts": {
      "connect_timeout_ms": 3000,
      "read_timeout_ms": 3000,
      "write_timeout_ms": 3000,
      "total_timeout_ms": 3000
    },

    "retry_configuration": {
      "max_retries": 2,
      "retry_backoff_factor": 0.5,
      "retry_status_codes": [500, 502, 503, 504]
    },

    "circuit_breaker": {
      "failure_threshold_percentage": 50,
      "wait_duration_ms": 30000,
      "permitted_calls_half_open": 3,
      "sliding_window_size": 10
    },

    "performance_thresholds": {
      "warning_threshold_ms": 1000,
      "error_threshold_ms": 2000,
      "max_response_time_ms": 2500
    },

    "testing_instructions": {
      "test_timeout_locally": "curl --max-time 3 http://localhost:8000/predict -X POST -H 'Content-Type: application/json' -d '{\"companhia_aerea\":\"AA\",\"aeroporto_origem\":\"JFK\",\"aeroporto_destino\":\"LAX\",\"data_hora_partida\":\"2024-01-15T14:30:00\",\"distancia_km\":3980.0}'",
      "verify_timeout_behavior": "time curl --max-time 2.5 http://localhost:8000/predict ...",
      "test_circuit_breaker": "Simulate API failures and check if Java client opens circuit breaker"
    },

    "notes": [
      "API Python garante resposta em até 2.5s",
      "Java deve usar timeout de 3s para margem de segurança",
      "Circuit breaker deve abrir após 50% de falhas",
      "Retry apenas para 5xx, não para 4xx"
    ]
  }
}